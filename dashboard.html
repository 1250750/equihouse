<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard | EquiHouse</title>
  <link rel="stylesheet" href="assets/css/style.css"/>
   <link rel="stylesheet" href="assets/css/dashboard.css"/>
  <link rel="icon" href="img/logo.png"/>


</head>
<body class="dark">
  <!-- glows -->
  <div class="page-glow page-glow-1"></div>
  <div class="page-glow page-glow-2"></div>

  <!-- topo (segue teu padrão) -->
  <header class="topbar">
    <div class="logo-wrap">
      <img src="img/logo.png" alt="EquiHouse" class="logo-img" />
      <div class="logo-text">EquiHouse</div>
    </div>
    <nav class="nav">
      <a href="index.html">Início</a>
      <a href="projetos.html">Projetos</a>
      <a href="mercado.html">Mercado Secundário</a>
      <a href="como-funciona.html">Como Funciona</a>
      <a href="contactos.html">Contactos</a>
    </nav>
    <div class="actions">
      <button class="ghost-btn" id="btnTheme" aria-label="Trocar tema"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" xml:space="preserve" ><path fill="#FFFFFF" d="M135.832 140.848h-70.9c-2.9 0-5.6-1.6-7.4-4.5-1.4-2.3-1.4-5.7 0-8.6l4-8.2c2.8-5.6 9.7-9.1 14.9-9.5 1.7-.1 5.1-.8 8.5-1.6 2.5-.6 3.9-1 4.7-1.3-.2-.7-.6-1.5-1.1-2.2-6-4.7-9.6-12.6-9.6-21.1 0-14 9.6-25.3 21.5-25.3s21.5 11.4 21.5 25.3c0 8.5-3.6 16.4-9.6 21.1-.5.7-.9 1.4-1.1 2.1.8.3 2.2.7 4.6 1.3 3 .7 6.6 1.3 8.4 1.5 5.3.5 12.1 3.8 14.9 9.4l3.9 7.9c1.5 3 1.5 6.8 0 9.1-1.6 2.9-4.4 4.6-7.2 4.6zm-35.4-78.2c-9.7 0-17.5 9.6-17.5 21.3 0 7.4 3.1 14.1 8.2 18.1.1.1.3.2.4.4 1.4 1.8 2.2 3.8 2.2 5.9 0 .6-.2 1.2-.7 1.6-.4.3-1.4 1.2-7.2 2.6-2.7.6-6.8 1.4-9.1 1.6-4.1.4-9.6 3.2-11.6 7.3l-3.9 8.2c-.8 1.7-.9 3.7-.2 4.8.8 1.3 2.3 2.6 4 2.6h70.9c1.7 0 3.2-1.3 4-2.6.6-1 .7-3.4-.2-5.2l-3.9-7.9c-2-4-7.5-6.8-11.6-7.2-2-.2-5.8-.8-9-1.6-5.8-1.4-6.8-2.3-7.2-2.5-.4-.4-.7-1-.7-1.6 0-2.1.8-4.1 2.2-5.9.1-.1.2-.3.4-.4 5.1-3.9 8.2-10.7 8.2-18-.2-11.9-8-21.5-17.7-21.5z"/></svg></button>
      <button class="primary-btn" id="btnWallet"><span class="icon">⬤</span>Ligar carteira</button>
    </div>
  </header>

  <!-- conteúdo -->
  <main class="page">
    <section class="page-head">
      <p class="muted">Através de um dashboard intuitivo</p>
      <h1>Dashboard</h1>
      <p class="muted">Acompanha progresso das obras, marcos técnicos, orçamento e distribuições. Analisa investimentos, mercado, prazos e recebimentos.</p>
    </section>

    <!-- KPIs -->
    <section class="kpis" id="kpis">
      <div class="kpi"><div class="label">Valor investido</div><div class="value" id="kpiInvested">—</div></div>
      <div class="kpi"><div class="label">Rendimentos recebidos</div><div class="value" id="kpiIncome">—</div></div>
      <div class="kpi"><div class="label">Projetos ativos</div><div class="value" id="kpiActive">—</div></div>
      <div class="kpi"><div class="label">Yield média</div><div class="value" id="kpiApy">—</div></div>
    </section>

    <div class="dash-grid">
      <!-- gráfico melhorado -->
      <section class="card">
        <h3>Evolução & Distribuições</h3>
        <div class="toolbar">
          <select id="selRange">
            <option value="6">Últimos 6 meses</option>
            <option value="12" selected>Últimos 12 meses</option>
            <option value="24">Últimos 24 meses</option>
          </select>
          <button class="btn" id="btnExport">Exportar CSV</button>
        </div>

        <div class="chart-wrap">
          <canvas id="incomeChart"></canvas>
          <div id="tt" class="tooltip"></div>
        </div>

        <div class="legend" id="legend">
          <div class="item" data-series="line"><span class="box" style="background:rgba(56,189,248,.9)"></span>Rendimento mensal</div>
          <div class="item" data-series="bars"><span class="box" style="background:rgba(59,130,246,.7)"></span>Distribuições</div>
          <div class="item" data-series="area"><span class="box" style="background:rgba(56,189,248,.35)"></span>Tendência</div>
        </div>
        <p class="muted" style="margin-top:6px;">Os contratos inteligentes executam desbloqueios e pagamentos automaticamente.</p>
      </section>

      <!-- marcos técnicos -->
      <section class="card">
        <h3>Marcos técnicos</h3>
        <div id="milestonesList" style="display:flex; flex-direction:column; gap:12px;"></div>
      </section>

      <!-- tabela de projetos -->
      <section class="card" style="grid-column: 1 / -1;">
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
          <h3>Os meus investimentos</h3>
          <div class="toolbar">
            <input id="searchInvest" class="input" placeholder="procurar por nome/código…"/>
            <select id="statusInvest">
              <option value="">Todos</option>
              <option value="A financiar">A financiar</option>
              <option value="Financiado">Financiado</option>
            </select>
          </div>
        </div>

        <div style="overflow:auto;">
          <table class="table" id="tableInvest">
            <thead>
              <tr>
                <th>Projeto</th>
                <th>Token</th>
                <th>Taxa Anual</th>
                <th>Montante</th>
                <th>Investido</th>
                <th>Progresso</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody id="tbodyInvest"></tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <footer class="footer">
    <p>© <span id="year">2025</span> EquiHouse</p>
  </footer>

  <script src="assets/js/dashboard.js"></script>

</body>
</html>
